""" 统计二进制中1的个数 """


# 测试链接:https://leetcode.cn/problems/hamming-distance/

class Solution:
    def hammingDistance(self, x: int, y: int) -> int:
        # 计算汉明距离：两个数二进制中不同位的数量
        return self.cntOnes(x ^ y)

    def cntOnes(self, n: int) -> int:
        # 分治法统计二进制中1的个数
        n = (n & 0x55555555) + ((n >> 1) & 0x55555555)  # 第1步：每2位统计1的个数
        n = (n & 0x33333333) + ((n >> 2) & 0x33333333)  # 第2步：每4位统计1的个数
        n = (n & 0x0f0f0f0f) + ((n >> 4) & 0x0f0f0f0f)  # 第3步：每8位统计1的个数
        n = (n & 0x00ff00ff) + ((n >> 8) & 0x00ff00ff)  # 第4步：每16位统计1的个数
        n = (n & 0x0000ffff) + ((n >> 16) & 0x0000ffff)  # 第5步：整个32位统计1的个数
        return n & 0xFFFFFFFF

# 🔍 算法示例：统计 n = 366 (二进制 0000 0000 0000 0000 0000 0001 0110 1110) 中1的个数
# 实际1的个数：二进制 101101110₂ 中有 6 个 1
#
# 原始 n = 366 (二进制: 0000 0000 0000 0000 0000 0001 0110 1110)
# 每8位一组显示：00000000 00000000 00000001 01101110
#
# 第1步：每2位统计 (0x55555555 = 0101 0101 0101 0101 0101 0101 0101 0101)
#   n & 0x55555555 = 取奇数位：0000 0000 0000 0000 0000 0001 0100 0100
#   (n>>1) & 0x55555555 = 取偶数位：0000 0000 0000 0000 0000 0000 0001 0101
#   相加结果：0000 0000 0000 0000 0000 0001 0101 1001
#   每2位表示原来2位中1的个数：01₂(1), 01₂(1), 01₂(1), 10₂(2), 01₂(1), 10₂(2), 01₂(1)
#
# 第2步：每4位统计 (0x33333333 = 0011 0011 0011 0011 0011 0011 0011 0011)
#   n & 0x33333333 = 取低2位：0000 0000 0000 0000 0000 0001 0001 0001
#   (n>>2) & 0x33333333 = 取高2位：0000 0000 0000 0000 0000 0000 0001 0010
#   相加结果：0000 0000 0000 0000 0000 0001 0010 0011
#   每4位表示原来4位中1的个数：0001₂(1), 0010₂(2), 0011₂(3)
#
# 第3步：每8位统计 (0x0f0f0f0f = 0000 1111 0000 1111 0000 1111 0000 1111)
#   n & 0x0f0f0f0f = 取低4位：0000 0000 0000 0000 0000 0001 0000 0011
#   (n>>4) & 0x0f0f0f0f = 取高4位：0000 0000 0000 0000 0000 0000 0000 0010
#   相加结果：0000 0000 0000 0000 0000 0001 0000 0101
#   每8位表示原来8位中1的个数：00000001₂(1), 00000101₂(5)
#
# 第4步：每16位统计 (0x00ff00ff = 0000 0000 1111 1111 0000 0000 1111 1111)
#   n & 0x00ff00ff = 取低8位：0000 0000 0000 0000 0000 0000 0000 0101
#   (n>>8) & 0x00ff00ff = 取高8位：0000 0000 0000 0000 0000 0000 0000 0001
#   相加结果：0000 0000 0000 0000 0000 0000 0000 0110
#   每16位表示原来16位中1的个数：0000000000000110₂(6)
#
# 第5步：整个32位统计 (0x0000ffff = 0000 0000 0000 0000 1111 1111 1111 1111)
#   n & 0x0000ffff = 取低16位：0000 0000 0000 0000 0000 0000 0000 0110
#   (n>>16) & 0x0000ffff = 取高16位：0000 0000 0000 0000 0000 0000 0000 0000
#   相加结果：0000 0000 0000 0000 0000 0000 0000 0110 (6)
#
# 最终结果：6 ✅ 二进制 0001 0110 1110 中确实有6个1
#
# 🎯 分治统计原理：
# 1. 第1步：相邻1位相加，得到每2位的1的个数
# 2. 第2步：相邻2位相加，得到每4位的1的个数
# 3. 第3步：相邻4位相加，得到每8位的1的个数
# 4. 第4步：相邻8位相加，得到每16位的1的个数
# 5. 第5步：相邻16位相加，得到整个32位的1的个数
