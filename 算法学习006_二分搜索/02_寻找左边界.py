"""
=================================================================================
ğŸ“˜ ç¨‹åºåç§°: äºŒåˆ†æŸ¥æ‰¾å¯¹æ•°å™¨ - å¯»æ‰¾å·¦è¾¹ç•Œ (Binary Search Validator - Find Leftmost)
=================================================================================
ã€ä¸»è¦åŠŸèƒ½ã€‘
éªŒè¯ "åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ >= num çš„æœ€å·¦ä½ç½®" ç®—æ³•çš„æ­£ç¡®æ€§.
é€šè¿‡å¤§é‡éšæœºæ ·æœ¬æµ‹è¯•, æ¯”å¯¹ "äºŒåˆ†æŸ¥æ‰¾" ä¸ "æš´åŠ›éå†" çš„ç»“æœ.

ã€æ ¸å¿ƒé€»è¾‘ã€‘
1. ç›®æ ‡ç®—æ³• (find_left): äºŒåˆ†æŸ¥æ‰¾ >= num çš„ç¬¬ä¸€ä¸ªä½ç½®.
   - ç­–ç•¥: é‡åˆ° >= num æ—¶, è®°å½•ç­”æ¡ˆå¹¶å‘å·¦ç¼©å‡èŒƒå›´, è¯•å›¾æ‰¾åˆ°æ›´é å·¦çš„ç­”æ¡ˆ.
2. right: æ‰¾åˆ°ç¬¬ä¸€ä¸ª >= num çš„ä½ç½®ä½œä¸ºæ ‡å‡†ç­”æ¡ˆ.
3. éšæœºæµ‹è¯• (test): ç”Ÿæˆéšæœºæ•°ç»„ -> æ’åº -> éšæœºæŸ¥æ‰¾ -> æ¯”å¯¹ç»“æœ.

ã€ä½¿ç”¨æ–¹æ³•ã€‘
ç›´æ¥è¿è¡Œ. å¦‚æœæ§åˆ¶å°ä»…æ‰“å° "Test is begin" å’Œ "Test is finished", è¯´æ˜ç®—æ³•æ­£ç¡®.
=================================================================================
"""

from random import randint
from bisect import bisect_left

"""
ğŸ“˜ bisect_left(arr, num) ç®€ä»‹:
1. å®ƒæ˜¯ Python å†…ç½®çš„äºŒåˆ†æŸ¥æ‰¾å‡½æ•°.
2. ä½œç”¨: å¯»æ‰¾ num åœ¨æœ‰åºæ•°ç»„ arr ä¸­çš„æ’å…¥ä½ç½®,ä¿æŒæ•°ç»„ä¾ç„¶æœ‰åº.
3. ä¹Ÿå°±æ˜¯å¯»æ‰¾: ç¬¬ä¸€ä¸ª >= num çš„ä½ç½®.
4. âš ï¸ å·®å¼‚: 
   - å¦‚æœ num æ¯”æ•°ç»„æ‰€æœ‰æ•°éƒ½å¤§,bisect_left è¿”å›æ•°ç»„é•¿åº¦ len(arr).
   - ä½ çš„ find_left åœ¨è¿™ç§æƒ…å†µä¸‹è¿”å› -1.
"""


# bisect_leftå‡½æ•°æœ‰ç±»ä¼¼çš„åŠŸèƒ½,ä½†æ˜¯ä¹Ÿæœ‰å·®å¼‚
# def bisect_left(*args, **kwargs):  # çœŸå®ç­¾åæœªçŸ¥
#     """
#     è¿”å›å°†å…ƒç´  x æ’å…¥åˆ°åˆ—è¡¨ a ä¸­çš„ç´¢å¼•ä½ç½®ï¼Œå‡è®¾ a å·²ç»æ˜¯æ’åºå¥½çš„ã€‚
#
#     è¿”å›å€¼ i æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
#     - a[:i] (å³ i å·¦ä¾§) ä¸­çš„æ‰€æœ‰å…ƒç´  e éƒ½æ»¡è¶³ e < x
#     - a[i:] (å³ i å³ä¾§) ä¸­çš„æ‰€æœ‰å…ƒç´  e éƒ½æ»¡è¶³ e >= x
#
#     å› æ­¤ï¼Œå¦‚æœ x å·²ç»å­˜åœ¨äºåˆ—è¡¨ä¸­ï¼Œa.insert(i, x) ä¼šå°†æ–°å…ƒç´ æ’å…¥åˆ°
#     **å·²å­˜åœ¨çš„æœ€å·¦è¾¹çš„ x ä¹‹å‰**ã€‚
#
#     å¯é€‰å‚æ•° lo (é»˜è®¤ä¸º 0) å’Œ hi (é»˜è®¤ä¸º len(a)) ç”¨äºç•Œå®š
#     åˆ—è¡¨ a ä¸­éœ€è¦è¢«æœç´¢çš„åˆ‡ç‰‡èŒƒå›´ã€‚
#     """
#     pass


def right(arr: list[int], num: int) -> int:
    n: int = len(arr)
    for i in range(n):
        if arr[i] >= num:
            return i
    return -1


# ==========================================
# âš¡ï¸ [å¾…æµ‹æ–¹æ³•] æ‰‹å†™äºŒåˆ†: æ‰¾ >= num çš„æœ€å·¦ä½ç½®
# ==========================================
def find_left(arr: list[int], num: int) -> int:
    # è¾¹ç•Œå¤„ç†: ç©ºæ•°ç»„ç›´æ¥è¿”å› -1
    if len(arr) == 0:
        return -1

    l: int = 0  # å·¦è¾¹ç•Œ
    r: int = len(arr) - 1  # å³è¾¹ç•Œ
    m: int = 0  # ä¸­é—´ç‚¹ç´¢å¼•
    ans: int = -1  # åˆå§‹åŒ–ç­”æ¡ˆä¸º -1 (è¡¨ç¤ºæœªæ‰¾åˆ°)

    # ç»å…¸äºŒåˆ†å¾ªç¯: å½“å·¦è¾¹ç•Œä¸è¶…è¿‡å³è¾¹ç•Œæ—¶æŒç»­æŸ¥æ‰¾
    while l <= r:
        m = l + (r - l) // 2  # è®¡ç®—ä¸­é—´ä½ç½® (é˜²æ­¢æº¢å‡ºå†™æ³•)

        # æ ¸å¿ƒé€»è¾‘: å¯»æ‰¾ >= num çš„ä½ç½®
        if arr[m] >= num:
            ans = m  # 1. è¿™æ˜¯ä¸€ä¸ªå¯èƒ½çš„ç­”æ¡ˆ, å…ˆè®°å½•ä¸‹æ¥
            r = m - 1  # 2. è´ªå¿ƒç­–ç•¥: ç¼©å°å³è¾¹ç•Œ, å¾€å·¦è¾¹ç»§ç»­æ‰¾æ›´é å‰çš„
        else:
            l = m + 1  # å½“å‰å€¼å¤ªå° (< num), ç­”æ¡ˆä¸€å®šåœ¨å³è¾¹, ç¼©å°å·¦è¾¹ç•Œ

    return ans  # è¿”å›æ‰¾åˆ°çš„æœ€å·¦ä½ç½®ç´¢å¼•, æ²¡æ‰¾åˆ°åˆ™ä¸º -1


# ==========================================
# ğŸ§ª [å¯¹æ•°å™¨] éªŒè¯é€»è¾‘
# ==========================================
def test(n: int, v: int):
    # 1. ç”Ÿæˆéšæœºæ•°ç»„: é•¿åº¦ä¸º n, å…ƒç´ èŒƒå›´ [1, v]
    arr: list[int] = [randint(1, v) for i in range(n)]

    # 2. âš ï¸ å…³é”®: äºŒåˆ†æŸ¥æ‰¾çš„å‰ææ˜¯æ•°ç»„å¿…é¡»æœ‰åº
    arr.sort()

    # 3. ç”Ÿæˆéšæœºç›®æ ‡å€¼: èŒƒå›´ [0, v] (åŒ…å«å¯èƒ½ä¸å­˜åœ¨çš„å€¼)
    num: int = randint(0, v)

    # 4. æ¯”å¯¹
    if right(arr, num) != find_left(arr, num):
        print("Something went wrong.")


# ==========================================
# ğŸš€ ä¸»ç¨‹åº
# ==========================================
def main() -> None:
    N: int = 100  # å•æ¬¡æµ‹è¯•çš„æœ€å¤§æ•°ç»„é•¿åº¦
    V: int = 1000  # æ•°ç»„å…ƒç´ çš„æœ€å¤§æ•°å€¼
    testTime: int = 50000  # æµ‹è¯•æ€»æ¬¡æ•° (æ ·æœ¬é‡)

    print("Testing Binary Search...")

    # å¼€å§‹æµ·é‡éšæœºæµ‹è¯•
    for i in range(testTime):
        n: int = randint(1, N)  # éšæœºç”Ÿæˆæœ¬æ¬¡æ•°ç»„é•¿åº¦ (1 åˆ° N)
        test(n, V)  # æ‰§è¡Œå•æ¬¡æµ‹è¯•

    print("Test is complete. âœ…")  # å¦‚æœæ²¡æœ‰æ‰“å°é”™è¯¯, è¯´æ˜é€šè¿‡æ‰€æœ‰æµ‹è¯•


if __name__ == '__main__':
    main()
