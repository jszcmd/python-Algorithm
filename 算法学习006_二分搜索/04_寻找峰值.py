"""
=================================================================================
ğŸ“˜ é¢˜ç›®: 162. å¯»æ‰¾å³°å€¼ (Find Peak Element)
ğŸ”— é¢˜ç›®é“¾æ¥: https://leetcode.cn/problems/find-peak-element/
=================================================================================
éš¾åº¦: ä¸­ç­‰
æ ‡ç­¾: æ•°ç»„, äºŒåˆ†æŸ¥æ‰¾

ã€é¢˜ç›®æè¿°ã€‘
å³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼ä¸¥æ ¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ .
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums, æ‰¾åˆ°å³°å€¼å…ƒç´ å¹¶è¿”å›å…¶ç´¢å¼•.
æ•°ç»„å¯èƒ½åŒ…å«å¤šä¸ªå³°å€¼, åœ¨è¿™ç§æƒ…å†µä¸‹, è¿”å› ä»»ä½•ä¸€ä¸ªå³°å€¼ æ‰€åœ¨ä½ç½®å³å¯.

--------------------------------------------------------------------------------
ğŸ’¡ æ ¸å¿ƒç†è§£ (User's Notes):
1. è¾¹ç•Œå‡è®¾: nums[-1] = nums[n] = -âˆ (æ— ç©·å°).
   è¿™æ„å‘³ç€åªè¦å¾€é«˜å¤„èµ°, å“ªæ€•èµ°åˆ°è¾¹ç•Œ, è¾¹ç•Œæœ¬èº«ä¹Ÿæ˜¯å³°å€¼.
2. æ•°æ®ç‰¹å¾: å·²çŸ¥ä»»ä½•ä¸¤ä¸ªç›¸é‚»çš„å€¼éƒ½ä¸ç›¸ç­‰ (nums[i] != nums[i+1]).
3. å¤æ‚åº¦è¦æ±‚: å¿…é¡»å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•.
   (æš—ç¤ºå¿…é¡»ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾, è€Œä¸æ˜¯éå†)

--------------------------------------------------------------------------------
ğŸŒŸ ç¤ºä¾‹ 1:
è¾“å…¥ï¼šnums = [1,2,3,1]
è¾“å‡ºï¼š2 (3æ˜¯å³°å€¼)

ğŸŒŸ ç¤ºä¾‹ 2:
è¾“å…¥ï¼šnums = [1,2,1,3,5,6,4]
è¾“å‡ºï¼š1 æˆ– 5 (2å’Œ6éƒ½æ˜¯å³°å€¼)
=================================================================================
"""
from typing import List


class Solution:
    def findPeakElement(self, nums: List[int]) -> int:
        n: int = len(nums)
        # ğŸ›¡ï¸ è¾¹ç•Œ 1: åªæœ‰ä¸€ä¸ªå…ƒç´ , å¿…ä¸ºå³°å€¼
        if n == 1: return 0
        # ğŸ›¡ï¸ è¾¹ç•Œ 2: æ£€æŸ¥ç¬¬ 0 ä¸ªä½ç½®
        # å› ä¸º nums[-1] ä¸ºè´Ÿæ— ç©·, åªè¦ nums[0] > nums[1], 0 å°±æ˜¯å³°å€¼
        if nums[0] > nums[1]: return 0
        # ğŸ›¡ï¸ è¾¹ç•Œ 3: æ£€æŸ¥æœ€åä¸€ä¸ªä½ç½®
        # å› ä¸º nums[n] ä¸ºè´Ÿæ— ç©·, åªè¦ nums[n-1] > nums[n-2], n-1 å°±æ˜¯å³°å€¼
        if nums[n - 1] > nums[n - 2]: return n - 1
        # âš¡ï¸ äºŒåˆ†æŸ¥æ‰¾ä¸­é—´éƒ¨åˆ†
        # å·§å¦™ç‚¹: èŒƒå›´é™åˆ¶åœ¨ [1, n-2], ç¡®ä¿ m-1 å’Œ m+1 æ°¸è¿œä¸è¶Šç•Œ!
        l, r, m = 1, n - 2, 0
        ans: int = -1

        while l <= r:
            m = (l + r) // 2
            # ğŸ“‰ æƒ…å†µA: å·¦é‚»å±…æ¯”è‡ªå·±å¤§ (ä¸‹å¡)
            # è¯´æ˜å·¦ä¾§è‚¯å®šæœ‰å³°å€¼, å¾€å·¦æ‰¾
            if nums[m - 1] > nums[m]:
                r = m - 1
            # ğŸ“ˆ æƒ…å†µB: å³é‚»å±…æ¯”è‡ªå·±å¤§ (ä¸Šå¡)
            # è¯´æ˜å³ä¾§è‚¯å®šæœ‰å³°å€¼, å¾€å³æ‰¾
            elif nums[m] < nums[m + 1]:
                l = m + 1
            # ğŸ¯ æƒ…å†µC: æ¯”å·¦è¾¹å¤§ä¸”æ¯”å³è¾¹å¤§ (nums[m-1] < nums[m] > nums[m+1])
            # æ‰¾åˆ°äº†å±±é¡¶!
            else:
                ans = m
                break
        return ans
